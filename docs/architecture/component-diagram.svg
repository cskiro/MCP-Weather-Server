<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">MCP Weather Server - Component Architecture</text>
  
  <!-- Client Applications Layer -->
  <rect x="100" y="90" width="600" height="60" rx="5" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" />
  <text x="400" y="125" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Client Applications</text>
  <text x="400" y="145" font-family="Arial" font-size="12" text-anchor="middle">(Web, Mobile, IoT Devices)</text>
  
  <!-- API Gateway Layer -->
  <rect x="100" y="180" width="600" height="60" rx="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" />
  <text x="400" y="215" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">API Gateway</text>
  <text x="400" y="235" font-family="Arial" font-size="12" text-anchor="middle">(Express.js, Rate Limiting, Request Validation)</text>
  
  <!-- Core Service Layer -->
  <rect x="100" y="270" width="600" height="150" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2" />
  <text x="400" y="295" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Core Services</text>
  
  <!-- Services -->
  <rect x="130" y="310" width="160" height="90" rx="5" fill="#ffecb3" stroke="#ffc107" stroke-width="1" />
  <text x="210" y="335" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Weather Service</text>
  <text x="210" y="355" font-family="Arial" font-size="10" text-anchor="middle">Current Conditions</text>
  <text x="210" y="370" font-family="Arial" font-size="10" text-anchor="middle">Forecasts</text>
  <text x="210" y="385" font-family="Arial" font-size="10" text-anchor="middle">Historical Data</text>
  
  <rect x="320" y="310" width="160" height="90" rx="5" fill="#ffecb3" stroke="#ffc107" stroke-width="1" />
  <text x="400" y="335" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Location Service</text>
  <text x="400" y="355" font-family="Arial" font-size="10" text-anchor="middle">Geocoding</text>
  <text x="400" y="370" font-family="Arial" font-size="10" text-anchor="middle">Reverse Geocoding</text>
  <text x="400" y="385" font-family="Arial" font-size="10" text-anchor="middle">Coordinate Parsing</text>
  
  <rect x="510" y="310" width="160" height="90" rx="5" fill="#ffecb3" stroke="#ffc107" stroke-width="1" />
  <text x="590" y="335" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Alert Service</text>
  <text x="590" y="355" font-family="Arial" font-size="10" text-anchor="middle">Notifications</text>
  <text x="590" y="370" font-family="Arial" font-size="10" text-anchor="middle">Weather Alerts</text>
  <text x="590" y="385" font-family="Arial" font-size="10" text-anchor="middle">User Subscriptions</text>
  
  <!-- Data Access Layer -->
  <rect x="100" y="450" width="600" height="60" rx="5" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" />
  <text x="400" y="485" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Data Access Layer</text>
  <text x="400" y="505" font-family="Arial" font-size="12" text-anchor="middle">(Repository Pattern, ORM)</text>
  
  <!-- External Services -->
  <rect x="100" y="540" width="180" height="40" rx="5" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" />
  <text x="190" y="565" font-family="Arial" font-size="14" text-anchor="middle">Weather API Providers</text>
  
  <rect x="310" y="540" width="180" height="40" rx="5" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" />
  <text x="400" y="565" font-family="Arial" font-size="14" text-anchor="middle">MongoDB</text>
  
  <rect x="520" y="540" width="180" height="40" rx="5" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" />
  <text x="610" y="565" font-family="Arial" font-size="14" text-anchor="middle">Redis Cache</text>
  
  <!-- Arrows -->
  <!-- Client to API -->
  <line x1="400" y1="150" x2="400" y2="180" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- API to Services -->
  <line x1="400" y1="240" x2="400" y2="270" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- Services to Data Access -->
  <line x1="400" y1="420" x2="400" y2="450" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- Data Access to External -->
  <line x1="190" y1="510" x2="190" y2="540" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="400" y1="510" x2="400" y2="540" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="610" y1="510" x2="610" y2="540" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- Arrow Marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#424242" />
    </marker>
  </defs>
</svg>
